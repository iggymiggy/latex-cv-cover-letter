% !TEX program = pdflatex
%-------------------------
% Professional Cover Letter Template in LaTeX
% Author : iggymiggy
% License : MIT
%
% Cover letter template matching CV styling.
% Personal info from personal_info.tex, defaults from base_config.tex,
% company-specific overrides from this file (in company folders).
%------------------------

% Global document settings (paper size, etc.)
% Load document_settings.tex (defines \loadfile)
% Try multiple paths to find document_settings.tex
\IfFileExists{../../document_settings.tex}{\input{../../document_settings.tex}}{%
\IfFileExists{../document_settings.tex}{\input{../document_settings.tex}}{%
\IfFileExists{document_settings.tex}{\input{document_settings.tex}}{}}}

\documentclass{article}

% Load common package (shared packages, commands, and helpers)
\loadfile{templates/common.sty}{}

% Cover letter-specific packages
\usepackage{etoolbox}
\usepackage[finnish,english]{babel}
\usepackage[utf8]{inputenc}
% Note: glyphtounicode is not needed - \pdfgentounicode=1 in common.sty already handles Unicode encoding

%-------------------------------------------
%%%%%%  COVER LETTER STARTS HERE  %%%%%%%%%%%%%%%%%%%

% Load personal information
% Handles compilation from root, templates/, or companies/company_name/
\loadfile{personal_info.tex}{}

% Load base/default configuration first
% This provides default values for all CV and cover letter fields
\loadfile{templates/base_config.tex}{}

% Load shared company configuration (variables used by both CV and cover letter)
\loadfile{shared.tex}{}

%-----------COMPANY DETAILS (COVER LETTER SPECIFIC)------------
\renewcommand{\companyrecipient}{Metan rekrytointitiimi}
\renewcommand{\companyname}{Meta}
\renewcommand{\companyaddress}{1 Hacker Way}
\renewcommand{\companycity}{Menlo Park, CA 94025}

%-----------COVER LETTER SETTINGS (COMPANY-SPECIFIC)------------
\renewcommand{\letterdatelanguage}{finnish}
\renewcommand{\letterdate}{auto}
\renewcommand{\letterclosing}{Ystävällisin terveisin}
\renewcommand{\letteropening}{Hyvä rekrytointitiimi,}
\renewcommand{\lettertitle}{Hakemus: Senior Software Engineer}
\renewcommand{\letterattachment}{Liitteenä: ansioluettelo}

%-----------LETTER BODY (COMPANY-SPECIFIC)------------
% Style: headed sections without horizontal rule, content in Finnish.
\renewcommand{\lettersection}[1]{%
  \vspace{12pt}%
  \noindent{\large\bfseries #1} \\%
  \vspace{6pt}%
}

\providecommand{\letterbody}{}%
\renewcommand{\letterbody}{%
  \lettersection{Minusta}
  Olen kokenut ohjelmisto- ja pilviasiantuntija, joka on työskennellyt useiden globaalien tuotteiden parissa skaalautuvissa ympäristöissä. Nautin monimutkaisten järjestelmien yksinkertaistamisesta, automaation rakentamisesta ja tiimien tukemisesta siten, että he voivat keskittyä arvoa tuottavaan työhön. Yhdistän vahvan teknisen osaamisen käytännönläheiseen asenteeseen ja selkeään viestintään.

  \lettersection{Miksi \companyname?}
  Meta on tunnettu kunnianhimoisista tuotteistaan, massiivisesta mittakaavastaan ja avoimen lähdekoodin yhteisön tukemisesta. Minua motivoi mahdollisuus rakentaa infrastruktuuria ja kehitysympäristöjä, jotka vaikuttavat miljardeihin käyttäjiin ja sadoihin kehittäjätiimeihin. Arvostan myös Metan kulttuuria, jossa dataohjattu päätöksenteko, jatkuva parantaminen ja yhteistyö ovat keskiössä.

  \lettersection{Miksi juuri minä?}
  Taustani pilviarkkitehtuurissa, DevOps-käytännöissä ja suurten hajautettujen järjestelmien ylläpidossa sopii hyvin \companyname:n tarpeisiin. Olen johtanut tiimejä, toteuttanut laajoja Kubernetes- ja IaC-ratkaisuja sekä vienyt käyttöön kehittäjien tuottavuutta parantavia työkaluja. Uskon, että voin auttaa Metaa rakentamaan entistä luotettavampia, tehokkaampia ja kehittäjäystävällisempiä palveluja.
}

\validateconfigcoverletter
\setpdfmetadata

\begin{document}

% Set up cover letter date (language selection and auto-date handling)
% Uses \letterdatelanguage and \letterdate (defined in base_config.tex or this file)
\setupcoverletterdate

%-----------HEADING------------
\renderheader

\vspace{20pt}

% %----------COMPANY DETAILS AND DATE-----------------
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}l@{\extracolsep{0pt}}r}
  \begin{minipage}[t]{0.52\textwidth}
    \small
    \raggedright
    \textbf{\companyrecipient} \\
    \cvcolor{primary}{\companyname} \\
    \cvcolor{primary}{\companyaddress} \\
    \cvcolor{primary}{\companycity} \\
  \end{minipage} &
  \begin{minipage}[t]{0.38\textwidth}
    \small
    \raggedleft
    \cvcolor{primary}{\letterdate} \\
  \end{minipage} \\
\end{tabular*}

\vspace{36pt}

%-----------LETTER TITLE AND OPENING------------
\noindent{\large\bfseries\underline{\lettertitle}} \\
\vspace{8pt}
\noindent \letteropening \\
\vspace{12pt}

%-----------LETTER CONTENT------------
% Content from base_config.tex or this file override
% Company configs can override \letterbody to reorder/add/remove sections.
\letterbody

\vspace{12pt}

%-----------LETTER CLOSING------------
\vspace{8pt}
\noindent \letterclosing, \\
\vspace{6pt}
\noindent\textbf{\myname} \\
\vspace{20pt}
\noindent\small\cvcolor{primary}{\textit{\letterattachment}}

%-------------------------------------------
\end{document}
