% !TEX program = pdflatex
%-------------------------
% Professional Cover Letter Template in LaTeX
% Author : iggymiggy
% License : MIT
%
% Cover letter template matching CV styling.
% Personal info from personal_info.tex, defaults from base_config.tex.
% Company-specific customizations are defined directly in this file.
%------------------------

% Global document settings (paper size, etc.)
% Define \loadfile helper before using it
\newcommand{\loadfile}[2]{%
  \IfFileExists{../../#1}{\input{../../#1}}{%
  \IfFileExists{../#1}{\input{../#1}}{%
  \IfFileExists{#1}{\input{#1}}{#2}}}%
}
\loadfile{document_settings.tex}{}

\documentclass{article}

% Load common package (shared packages, commands, and helpers)
\loadfile{templates/common.sty}{}

% Cover letter-specific packages
\usepackage{etoolbox}
\usepackage[finnish,english]{babel}
\usepackage[utf8]{inputenc}
% Note: glyphtounicode is not needed - \pdfgentounicode=1 in common.sty already handles Unicode encoding

%-------------------------------------------
%%%%%%  COVER LETTER STARTS HERE  %%%%%%%%%%%%%%%%%%%

% Load personal information
% Handles compilation from root, templates/, or companies/company_name/
\loadfile{personal_info.tex}{}

% Load base/default configuration first
% This provides default values for all cover letter fields
\loadfile{templates/base_config.tex}{}

% Load shared company configuration (variables used by both CV and cover letter)
\loadfile{shared.tex}{}

%-----------COMPANY DETAILS (COVER LETTER SPECIFIC)------------
\renewcommand{\companyrecipient}{Google Hiring Team}
\renewcommand{\companyname}{Google}
\renewcommand{\companyaddress}{1600 Amphitheatre Parkway}
\renewcommand{\companycity}{Mountain View, CA 94043}

%-----------COVER LETTER SETTINGS (COMPANY-SPECIFIC)------------
\renewcommand{\letterdatelanguage}{english}
\renewcommand{\letterdate}{auto}
\renewcommand{\letterclosing}{Sincerely}
\renewcommand{\letteropening}{Dear Hiring Manager,}
\renewcommand{\lettertitle}{Job Application for Staff Software Engineer}
\renewcommand{\letterattachment}{Attached: Curriculum Vitae}

%-----------LETTER BODY (COMPANY-SPECIFIC)------------
% Style 1: Headed sections with horizontal rule (default \lettersection).
% Content is defined directly here - no intermediate variables needed.
\providecommand{\letterbody}{}%
\renewcommand{\letterbody}{%
  \lettersection{About Me}
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.

  \lettersection{Why \companyname?}
  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.

  \lettersection{Why Me?}
  At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident.
}

\validateconfigcoverletter
\setpdfmetadata

\begin{document}

% Set up cover letter date (language selection and auto-date handling)
% Uses \letterdatelanguage and \letterdate (defined in base_config.tex or this file)
\setupcoverletterdate

%-----------HEADING------------
\begin{center}
  {\Huge \textbf{\textcolor{\cvthemeaccent}{\myname}}} \\
  \vspace{2pt}
  {\Large \textcolor{\cvthemetitle}{\cvtitle}} \\
  \vspace{4pt}
  \href{\mylinkedinurl}{\faLinkedin\ linkedin.com/in/\mylinkedin} \quad
  \href{\mygithuburl}{\faGithub\ github.com/\mygithub} \quad
  \href{\myportfoliourl}{\faFolderOpen\ \myportfolio} \\
  \faEnvelope\ \href{mailto:\myemail}{\myemail} \quad
  \ifnotempty{\myphone}{\faPhone\ \href{tel:\myphone}{\myphone} \quad}{}%
  \ifnotempty{\mylocation}{\faMapMarker\ \cvcolor{primary}{\mylocation}}{} \\
\end{center}

\vspace{20pt}

% %----------COMPANY DETAILS AND DATE-----------------
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}l@{\extracolsep{0pt}}r}
  \begin{minipage}[t]{0.52\textwidth}
    \small
    \raggedright
    \textbf{\companyrecipient} \\
    \cvcolor{primary}{\companyname} \\
    \cvcolor{primary}{\companyaddress} \\
    \cvcolor{primary}{\companycity} \\
  \end{minipage} &
  \begin{minipage}[t]{0.38\textwidth}
    \small
    \raggedleft
    \cvcolor{primary}{\letterdate} \\
  \end{minipage} \\
\end{tabular*}

\vspace{36pt}

%-----------LETTER TITLE AND OPENING------------
\noindent{\large\bfseries\underline{\lettertitle}} \\
\vspace{8pt}
\noindent \letteropening \\
\vspace{12pt}

%-----------LETTER CONTENT------------
% Content from base_config.tex default or company cover_letter.tex override
% Company configs can override \letterbody to reorder/add/remove sections.
\letterbody

\vspace{12pt}

%-----------LETTER CLOSING------------
\vspace{8pt}
\noindent \letterclosing, \\
\vspace{6pt}
\noindent\textbf{\myname} \\
\vspace{20pt}
\noindent\small\cvcolor{primary}{\textit{\letterattachment}}

%-------------------------------------------
\end{document}
