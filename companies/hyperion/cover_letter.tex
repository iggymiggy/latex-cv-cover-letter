% !TEX program = pdflatex
%-------------------------
% Professional Cover Letter Template in LaTeX
% Author : iggymiggy
% License : MIT
%
% Cover letter template matching CV styling.
% Personal info from personal_info.tex, defaults from base_config.tex,
% company-specific overrides from this file (in company folders).
%------------------------

% Global document settings (paper size, etc.)
% Define \loadfile helper before using it
\newcommand{\loadfile}[2]{%
  \IfFileExists{../../#1}{\input{../../#1}}{%
  \IfFileExists{../#1}{\input{../#1}}{%
  \IfFileExists{#1}{\input{#1}}{#2}}}%
}
\loadfile{document_settings.tex}{}

\documentclass{article}

% Load common package (shared packages, commands, and helpers)
\loadfile{templates/common.sty}{}

% Cover letter-specific packages
\usepackage{etoolbox}
\usepackage[finnish,english]{babel}
\usepackage[utf8]{inputenc}
% Note: glyphtounicode is not needed - \pdfgentounicode=1 in common.sty already handles Unicode encoding

%-------------------------------------------
%%%%%%  COVER LETTER STARTS HERE  %%%%%%%%%%%%%%%%%%%

% Load personal information
% Handles compilation from root, templates/, or companies/company_name/
\loadfile{personal_info.tex}{}

% Load base/default configuration first
% This provides default values for all CV and cover letter fields
\loadfile{templates/base_config.tex}{}

% Load shared company configuration (variables used by both CV and cover letter)
\loadfile{shared.tex}{}

%-----------COMPANY DETAILS (COVER LETTER SPECIFIC)------------
\renewcommand{\companyrecipient}{Recruiting Committee}
\renewcommand{\companyname}{Hyperion BioSystems}
\renewcommand{\companyaddress}{42 Helix Avenue}
\renewcommand{\companycity}{Cambridge, MA 02139}

%-----------COVER LETTER SETTINGS (COMPANY-SPECIFIC)------------
\renewcommand{\letterdatelanguage}{english}
\renewcommand{\letterdate}{auto}
\renewcommand{\letterclosing}{Sincerely}
\renewcommand{\letteropening}{Dear Hiring Manager,}
\renewcommand{\lettertitle}{Application for Principal Systems Safety Engineer}
\renewcommand{\letterattachment}{Attached: Curriculum Vitae}

%-----------LETTER BODY (COMPANY-SPECIFIC)------------
% Style 3: Plain paragraphs (no section headlines).
% Content is defined directly here - no intermediate variables needed.
\providecommand{\letterbody}{}%
\renewcommand{\letterbody}{%
  I build safety-critical systems where reliability, clarity, and evidence matter more than hype. Over the last decade I have led incident-driven engineering programs, written safety cases for complex socio-technical systems, and partnered with product, infrastructure, and security teams to turn ambiguous risks into measurable controls.

  \vspace{10pt}

  Hyperion BioSystems sits at the intersection of software, hardware, and regulated environments—exactly where engineering discipline becomes a competitive advantage. I'm excited by work that requires rigorous design reviews, traceability, and continuous verification, while still shipping fast enough to make a difference for customers.

  \vspace{10pt}

  I'm effective in roles that combine technical depth with operational ownership: defining safety requirements, aligning stakeholders, and building the tooling and processes that keep systems safe at scale. I bring a pragmatic approach—prioritizing high-impact mitigations, instrumenting what matters, and continuously learning from incidents and near-misses.
}

\validateconfigcoverletter
\setpdfmetadata

\begin{document}

% Set up cover letter date (language selection and auto-date handling)
% Uses \letterdatelanguage and \letterdate (defined in base_config.tex or this file)
\setupcoverletterdate

%-----------HEADING------------
\begin{center}
  {\Huge \textbf{\textcolor{\cvthemeaccent}{\myname}}} \\
  \vspace{2pt}
  {\Large \textcolor{\cvthemetitle}{\cvtitle}} \\
  \vspace{4pt}
  \href{\mylinkedinurl}{\faLinkedin\ linkedin.com/in/\mylinkedin} \quad
  \href{\mygithuburl}{\faGithub\ github.com/\mygithub} \quad
  \href{\myportfoliourl}{\faFolderOpen\ \myportfolio} \\
  \href{mailto:\myemail}{\myemail} \quad
  \href{tel:\myphone}{\myphone} \\
\end{center}

\vspace{20pt}

%-----------COMPANY DETAILS AND DATE------------
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}l@{\extracolsep{0pt}}r}
  \begin{minipage}[t]{0.52\textwidth}
    \small
    \raggedright
    \textbf{\companyrecipient} \\
    \cvcolor{primary}{\companyname} \\
    \cvcolor{primary}{\companyaddress} \\
    \cvcolor{primary}{\companycity} \\
  \end{minipage} &
  \begin{minipage}[t]{0.38\textwidth}
    \small
    \raggedleft
    \cvcolor{primary}{\letterdate} \\
  \end{minipage} \\
\end{tabular*}

\vspace{36pt}

%-----------LETTER TITLE AND OPENING------------
\noindent{\large\bfseries\underline{\lettertitle}} \\
\vspace{8pt}
\noindent \letteropening \\
\vspace{12pt}

%-----------LETTER CONTENT------------
% Content from base_config.tex or this file override
% Company configs can override \letterbody to reorder/add/remove sections.
\letterbody

\vspace{12pt}

%-----------LETTER CLOSING------------
\vspace{8pt}
\noindent \letterclosing, \\
\vspace{6pt}
\noindent\textbf{\myname} \\
\vspace{20pt}
\noindent\small\cvcolor{primary}{\textit{\letterattachment}}

%-------------------------------------------
\end{document}
