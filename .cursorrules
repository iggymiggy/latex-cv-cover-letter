# Cursor AI Context Rules for LaTeX CV Template Project

## Critical Rules - DO NOT REPEAT THESE MISTAKES

### PDF to PNG Conversion
**ALWAYS use `pdftoppm` for converting PDFs to PNG images, NEVER use `sips`**
- `sips` produces black/incorrect images when converting PDFs
- Correct command: `pdftoppm -png -r 150 input.pdf output_temp && mv output_temp-1.png output.png`
- This applies to ALL example image generation in `examples/companies/`
- When updating example images, BOTH PDFs and PNGs in `examples/companies/` must be updated

### Example Files Update Process
When updating example files (PDFs/PNGs):
1. **First**: Update/copy PDFs from `companies/*/` to `examples/companies/`
2. **Then**: Regenerate PNG images from those updated PDFs using `pdftoppm`
3. **Verify**: Check that both PDFs and PNGs have current timestamps
4. **Never**: Generate PNGs from old PDFs or skip updating the PDFs first

## Project Structure

### File Locations
- Company-specific files: `companies/{company_name}/`
- Example files (for README): `examples/companies/`
- Templates: `templates/`
- Scripts: `scripts/`

### CV Format
- **CV is designed to be 1-page** - Template is optimized for single-page CVs
- When helping users, prioritize keeping content concise to fit one page
- Users can extend beyond one page if needed, but the design intent is single-page
- Adjust section content and spacing to maintain one-page format when possible

### Build Output
- Company builds: `companies/{company_name}/{company}_cv.pdf` and `{company}_cover_letter.pdf`
- Examples: `examples/companies/{company}_cv.pdf` and `{company}_cover_letter.pdf`
- When updating examples, copy from company builds to examples directory

## Color Theme System
- Color themes are defined in `companies/*/shared.tex`
- Colors are applied via `\cvcolor{type}{content}` macro
- Theme variables: `\cvthemeprimary`, `\cvthemeaccent`, `\cvthemelink`, `\cvthemesection`
- When updating colors, regenerate ALL example images to show changes

## Validation
- Always run `make validate` after making changes
- All templates must compile successfully
- Use `make` to build all companies
- Pre-commit hooks run validation automatically

## Documentation Updates
- **ALWAYS update documentation when making changes:**
  1. `README.md` - User documentation (if user-facing features change)
  2. `CHANGELOG.md` - Change log (for all notable changes)
  3. Inline comments in code files (if adding new commands/macros)
- Keep examples in sync with actual functionality
- **Before committing:** Verify README.md and CHANGELOG.md are updated if needed
- If you forget to update documentation, the user will remind you - don't repeat this mistake!

## Context7 Documentation Lookup
- **ALWAYS use Context7 MCP server for documentation lookups**
- When you need to look up LaTeX package documentation, commands, or best practices, use Context7 instead of web search
- Use `mcp_context7_resolve-library-id` to find library IDs, then `mcp_context7_get-library-docs` to get documentation
- This provides up-to-date, accurate documentation directly from source
- Example: When working with LaTeX packages (etoolbox, fontawesome5, hyperref, etc.), use Context7 to get official documentation

## Local-Only Files
- **CRITICAL: When user asks to create a file "LOCALLY" or "local only":**
  1. **ALWAYS add it to `.git/info/exclude`** (NOT `.gitignore`)
  2. `.git/info/exclude` is local-only and never pushed to remote
  3. `.gitignore` would be committed and pushed (which defeats the purpose)
  4. Example: `CODE_SMELLS_ANALYSIS.md`, `IMPROVEMENTS.md` are in `.git/info/exclude`
  5. **NEVER commit local-only files or add them to `.gitignore`**
  6. If a file was already committed, use `git rm --cached <file>` to remove it, then add to `.git/info/exclude`

